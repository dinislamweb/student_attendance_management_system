{% extends "base.html" %}
{% block content %}
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f9;
  }
  .container {
    max-width: 950px;
    margin: 40px auto;
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  }
  h2 {
    text-align: center;
    color: #0077cc;
    margin-bottom: 10px;
  }
  .student-info {
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    color: #2c3e50;
    margin-bottom: 25px;
  }
  h3 {
    margin-top: 30px;
    color: #333;
    border-bottom: 2px solid #0077cc;
    padding-bottom: 5px;
    text-align: center;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: center;
  }
  th {
    background: #0077cc;
    color: white;
    font-size: 15px;
  }
  td {
    font-size: 14px;
  }
  .present {
    color: #28a745;
    font-weight: bold;
  }
  .absent {
    color: #dc3545;
    font-weight: bold;
  }
  .view-btn {
    display: inline-block;
    margin-top: 20px;
    padding: 10px 20px;
    background: #0077cc;
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-size: 15px;
    font-weight: bold;
    transition: background 0.3s ease;
  }
  .view-btn:hover {
    background: #005fa3;
  }
</style>

<div class="container">
  <h2>Student Dashboard</h2>

  <!-- ✅ Student Info -->
  {% if student %}
    <p class="student-info">
      Student: {{ student.user.full_name }}<br>
      ID: {{ student.roll_no }}<br>
      Semester: {{ student.semester }}
    </p>
  {% else %}
    <p style="text-align:center; color:#dc3545; font-weight:bold;">
      No student information available.
    </p>
  {% endif %}

  <!-- ✅ Attendance Summary -->
  <h3>Class-wise Attendance Summary</h3>
  {% if class_summary %}
    <table>
      <tr>
        <th>Class</th>
        <th>Total Classes</th>
        <th>Present</th>
        <th>Absent</th>
        <th>Attendance %</th>
      </tr>
      {% for summary in class_summary %}
        <tr>
          <td>{{ summary.class_obj.code }} - {{ summary.class_obj.title }}</td>
          <td>{{ summary.total }}</td>
          <td><span class="present">{{ summary.present }}</span></td>
          <td><span class="absent">{{ summary.absent }}</span></td>
          <td>{{ summary.percentage }}%</td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p style="text-align:center; color:#dc3545; font-weight:bold;">
      No attendance summary available.
    </p>
  {% endif %}

  <!-- ✅ Date-wise Attendance Button -->
  {% if student %}
    <div style="text-align:center;">
      <a href="{% url 'student_datewise_attendance' student.id %}" class="view-btn">
        View Date-wise Attendance
      </a>
    </div>
  {% endif %}
</div>
{% endblock %}
